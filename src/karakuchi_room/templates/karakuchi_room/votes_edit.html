<!DOCTYPE html>
<html lang="ja">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-9ndCyUaIbzAi2FUVXJi0CjmCapSmO7SnpJef0486qhLnuZ2cdeRhO02iuK6FUUVM" crossorigin="anonymous">
</head>

<body>
    {% comment %} ナビゲーションバー仮 {% endcomment %}
    <nav>
        <div class="container">
            <div class="d-flex justify-content-between align-items-center py-3">
                <div class="col">
                    <a href=""><img width="100" src="image/logo.png" alt="鷹の爪親方の辛口部屋のロゴ"></a>
                </div>
                <div class="col-auto">
                    <div class="d-flex align-items-center">
                        <a class="me-3" href="{% url 'survey-create'%}">アンケート作成</a>
                        <a class="me-3" href="{% url 'survey-list'%}">アンケート一覧
                        <a class=" me-3" href="">ユーザー情報</a>
                        {% comment %} Django5から<a href="{% url 'logout' %}"> （GET）が禁止され<form method="post"> （POST）でログアウトできるようになっている {% endcomment %}
                        <form action="{% url 'logout' %}" method="POST">
                            {% csrf_token %}
                            <button type="submit" class="btn btn-outline-primary">ログアウト</button>
                        </form>
                    </div>
                </div>
            </div>
        </div>
        {% comment %} ナビゲーションバー仮 {% endcomment %}
    </nav>
    <div class="container">
        {% comment %} 実装時、{% block content}{% endblock content %}外はbase.htmlから参照する {% endcomment %}
        {% block content %} 
        <div class="header">
            <h2>投票編集</h2>
        </div>
        <div class="survey-title my-3">
            <h2>{{ survey.title }} </h2>
        </div>
        <div class="deadline my-2">
            <span>投票期限：{{ survey.end_at }}</span>
        </div>
        <div class="discription border border-secondary p-2 my-3">
            <p>{{ survey.description }}</p>
        </div>
        <form action="" method="post">
            {% csrf_token %}
            
            <div class="h4 mt-5">
                <p>あなたはどう思う？</p>
            </div>
            {% comment %} 選択肢をradioボタンをfor文で繰り返し表示 {% endcomment %}
            <div class="select-radio p-3">
                <div class="m-3 p-3">
                    {% for option in option_list %}
                    <div class="form-check mb-2">
                        <input class="form-check-input"
                            type="radio"
                            name="option"
                            id="option_{{ option.id }}"
                            value="{{ option.id }}"
                            {% comment%} 選択済みの項目にチェックを付けて表示する {%endcomment %}
                            {% if option.id == vote.option_id %}
                                checked
                            {% endif %}>                 
                            <label class="form-check-label" for="option_{{ option.id }}" >
                                {{ option.label }}
                            </label>
                    </div>
                    {% endfor %}
                </div>
            </div>
            <div class="comment mt-5 mb-4">
                <label class="form-label" for="{{ form.comment.id_for_label }}">
                    <h4>選択肢を選んだ理由（任意）</h4>
                </label>
                {{ form.comment }}
            </div>
            {% comment %} 追加機能 文章加工機能{% endcomment %}
            {% comment %} <div class="edit-button row mb-5">
                <button class="btn btn-secondary col-md m-3">甘口文章に変換</button>
                <button class="btn btn-secondary col-md m-3">文章の癖を減らす</button>
            </div> {% endcomment %}
            {% comment %} 追加機能 文章加工機能ここまで{% endcomment %}
            <div class="submit-btn text-center">
                <button type="submit" class="btn btn-success px-5">投票内容を修正！</button>
            </div>
        </form>
        <div class="text-center my-5">
            <a href="{% url 'vote-detail' vote.pk %}">投票編集をキャンセルして戻る</a>
        </div>
        {% endblock content %} 
    </div>
    <footer class="text-center p-3">
        <span class="text-muted"> &copy; Team C 2025 Autumn</span>
    </footer>
</body>

</html>