FROM python:3.11-slim

WORKDIR /app

# å¿…è¦ãªãƒ“ãƒ«ãƒ‰ãƒ„ãƒ¼ãƒ«ã¨ MySQL é–‹ç™ºç”¨ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚’è¿½åŠ 
RUN apt-get update && apt-get install -y \
    default-libmysqlclient-dev \
    build-essential \
    pkg-config \
    && apt-get clean \
    && rm -rf /var/lib/apt/lists/*

# pip ã‚’æœ€æ–°åŒ– + æœ¬ç•ªç”¨ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
COPY containers/requirements.prod.txt /app/requirements.prod.txt
RUN pip install --upgrade pip \
    && pip install --upgrade setuptools \
    && pip install -r requirements.prod.txt

# ğŸ”½ entrypoint.sh ã‚’ã‚³ãƒ³ãƒ†ãƒŠå†…ã«ã‚³ãƒ”ãƒ¼
COPY containers/entrypoint.sh /entrypoint.sh

# entrypoint.sh ã‚’å®Ÿè¡Œå¯èƒ½ã«ã™ã‚‹
RUN chmod +x /entrypoint.sh

# ã‚³ãƒ³ãƒ†ãƒŠèµ·å‹•æ™‚ã« entrypoint.sh ã‚’å®Ÿè¡Œ
ENTRYPOINT ["/entrypoint.sh"]